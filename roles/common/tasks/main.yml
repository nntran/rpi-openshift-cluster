- name: Ensure base packages are installed
  apt:
    name:
      - apt-transport-https
      - ca-certificates
      - curl
      - git
      - jq
      - software-properties-common
    state: present
    update_cache: yes

- name: Disable swap
  shell: |
    swapoff -a
    sed -i '/swap/d' /etc/fstab
  args:
    warn: false
  register: swapoff_result
  changed_when: "'swapoff' in swapoff_result.stdout or swapoff_result.rc == 0"
